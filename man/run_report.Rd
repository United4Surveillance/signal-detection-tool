% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_report.R
\name{run_report}
\alias{run_report}
\title{Renders signal detection report}
\usage{
run_report(
  data,
  report_format = "HTML",
  method = "FarringtonFlexible",
  number_of_weeks = 6,
  pathogens = NULL,
  strata = c("county", "age_group"),
  tables = TRUE,
  output_file = NULL,
  output_dir = ".",
  signals_padded = NULL,
  signals_agg = NULL,
  intervention_date = NULL,
  custom_logo = NULL,
  custom_theme = NULL
)
}
\arguments{
\item{data}{data.frame containing surveillance data in linelist format following the format specified in `input_metadata`}

\item{report_format}{character, format of the report: "HTML" or "DOCX"}

\item{method}{a character string, signal detection method to be used. One of "FarringtonFlexible", "EARS" , "CUSUM", "Mean", "Timetrend", "Harmonic", "Harmonic with timetrend", "Step harmonic", "Step harmonic with timetrend".
You can retrieve the full list using [names(available_algorithms())].}

\item{number_of_weeks}{integer, number of weeks for which signals are generated}

\item{pathogens}{A character vector specifying which pathogens should be included in report. If `NULL` (default) all pathogens provided in `data` or in `signals_padded`, `signals_agg` are used.}

\item{strata}{A character vector specifying the columns to stratify. If `NULL` no strata are used.
the analysis. Default is NULL.}

\item{tables}{Logical. True if tables should be included in report.}

\item{output_file}{A character string specifying the name of the output file (without directory path). If `NULL` (default), the file name is automatically generated to be SignalDetectionReport. See \link[rmarkdown]{render} for more details.}

\item{output_dir}{A character string specifying the output directory for the rendered output file (default is ".", which means the rendered file will be saved in the current working directory. See \link[rmarkdown]{render} for more details. `NULL` is used when running the report from shiny app which will take the Downloads folder as default option for saving.}

\item{signals_padded}{A tibble of precomputed and padded signals containing a `pathogen` column.
If multiple pathogens are present, the tibble should represent all of them stacked together
(e.g., using `dplyr::bind_rows()`).
Defaults to `NULL`, in which case the signal data will be computed from the linelist
within the `run_report()` function.
If not `NULL`, the provided `signals_padded` is used as-is, and signals are not recomputed.}

\item{signals_agg}{A tibble of aggregated signals containing a `pathogen` column.
If multiple pathogens are included, the tibble should represent all of them stacked together
(e.g., using `dplyr::bind_rows()`).
Defaults to `NULL`, in which case the aggregated signals are computed from the linelist
within the `run_report()` function.
If not `NULL`, the provided `signals_agg` is used directly and signals are not recomputed.}

\item{intervention_date}{A date object or character of format yyyy-mm-dd or NULL specifying the date for the intervention. This can be used for interrupted timeseries analysis. It only works with the following methods: "Mean", "Timetrend", "Harmonic", "Harmonic with timetrend", "Step harmonic", "Step harmonic with timetrend". Default is NULL which indicates that no intervention is done.}

\item{custom_logo}{A character string with a path to a png or svg logo, to replace the default United 4 Surveillance logo.}

\item{custom_theme}{A bslib::bs_theme() to replace the default United 4 Surveillance theme. This is mainly used to change colors. See the bslib documentation for all parameters. Use version = "3" to keep the navbar intact.}
}
\value{
the compiled document is written into the output file, and the path of the output file is returned; see \link[rmarkdown]{render}
}
\description{
If executed as a standalone function, all filtering must
be performed beforehand.
This function is also invoked within the app.
}
\examples{
\dontrun{
# Example 1: Run report with specified parameters and HTML format output
run_report(
  report_format = "HTML",
  data = SignalDetectionTool::input_example,
  method = "FarringtonFlexible",
  strata = c("county", "sex"),
  tables = TRUE,
  number_of_weeks = 6
)
# Example 2: An example output directory specified
run_report(
  method = "EARS",
  output_dir = "C:/Users/SmithJ/Documents"
)
# Example 3: An example output file name is specified
run_report(
  method = "EARS",
  output_file = "My Signal Report"
)

# Example 4: No strata are used
run_report(
  report_format = "HTML",
  data = SignalDetectionTool::input_example,
  method = "EARS",
  strata = NULL
)
}
}
\seealso{
[names(available_algorithms())]
}
